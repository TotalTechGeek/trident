function Hz(W,H){function G(){this.constructor=W}G.prototype=H.prototype,W.prototype=new G}function f(W,H,G,j){var R=Error.call(this,W);if(Object.setPrototypeOf)Object.setPrototypeOf(R,f.prototype);return R.expected=H,R.found=G,R.location=j,R.name="SyntaxError",R}Hz(f,Error);function t(W,H,G){if(G=G||" ",W.length>H)return W;return H-=W.length,G+=G.repeat(H),W+G.slice(0,H)}f.prototype.format=function(W){var H="Error: "+this.message;if(this.location){var G=null,j;for(j=0;j<W.length;j++)if(W[j].source===this.location.source){G=W[j].text.split(/\r\n|\n|\r/g);break}var R=this.location.start,_=this.location.source&&typeof this.location.source.offset==="function"?this.location.source.offset(R):R,k=this.location.source+":"+_.line+":"+_.column;if(G){var C=this.location.end,v=t("",_.line.toString().length," "),U=G[R.line-1],X=R.line===C.line?C.column:U.length+1,b=X-R.column||1;H+="\n --> "+k+"\n"+v+" |\n"+_.line+" | "+U+"\n"+v+" | "+t("",R.column-1," ")+t("",b,"^")}else H+="\n at "+k}return H};f.buildMessage=function(W,H){var G={literal:function(U){return"\""+R(U.text)+"\""},class:function(U){var X=U.parts.map(function(b){return Array.isArray(b)?_(b[0])+"-"+_(b[1]):_(b)});return"["+(U.inverted?"^":"")+X.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(U){return U.description}};function j(U){return U.charCodeAt(0).toString(16).toUpperCase()}function R(U){return U.replace(/\\/g,"\\\\").replace(/"/g,"\\\"").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(X){return"\\x0"+j(X)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(X){return"\\x"+j(X)})}function _(U){return U.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(X){return"\\x0"+j(X)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(X){return"\\x"+j(X)})}function k(U){return G[U.type](U)}function C(U){var X=U.map(k),b,T;if(X.sort(),X.length>0){for(b=1,T=1;b<X.length;b++)if(X[b-1]!==X[b])X[T]=X[b],T++;X.length=T}switch(X.length){case 1:return X[0];case 2:return X[0]+" or "+X[1];default:return X.slice(0,-1).join(", ")+", or "+X[X.length-1]}}function v(U){return U?"\""+R(U)+"\"":"end of input"}return"Expected "+C(W)+" but "+v(H)+" found."};function vz(W,H){H=H!==void 0?H:{};var G={},j=H.grammarSource,R={Content:o},_=o,k="\n",C=" ",v="{{#",U="}}",X="{{",b="{{/",T="../",D="{",L="}",c="true",r="false",$="null",g="undefined",vq="=",p="\"",s="'",Tq="(",yq=")",E=/^[@$a-zA-Z_.\-]/,e=/^[^{}]/,qq=/^[@$a-zA-Z_.\/\-]/,zq=/^[0-9]/,Gq=/^[^"]/,Jq=/^[^"'"]/,Kq=/^[ \t\n\r]/,Mq=N("\n",!1),Qq=N(" ",!1),Wq=N("{{#",!1),F=N("}}",!1),kq=N("{{",!1),Cq=N("{{/",!1),Yq=N("../",!1),P=m(["@","$",["a","z"],["A","Z"],"_",".","-"],!1,!1),Zq=m(["{","}"],!0,!1),l=N("{",!1),n=N("}",!1),wq=m(["@","$",["a","z"],["A","Z"],"_",".","/","-"],!1,!1),mq=N("true",!1),xq=N("false",!1),fq=N("null",!1),hq=N("undefined",!1),Iq=N("=",!1),Oq=m([["0","9"]],!1,!1),Uq=N("\"",!1),Xq=m(["\""],!0,!1),Bq=N("'",!1),Hq=m(["\"","'","\""],!0,!1),dq=N("(",!1),Aq=N(")",!1),Vq=m([" ","\t","\n","\r"],!1,!1),Dq=function(q){return{cat:q}},Lq=function(q,J,K){if(q.name!=K)throw new Error("Expected {{/"+q+"}} but {{/"+K+"}} found.");if(typeof J.cat[J.cat.length-1]==="string")J.cat.push(J.cat.pop().trimEnd());if(q.name==="if"){let M=[[{cat:[]}]],Q=!1;for(let Z of J.cat){if(Z.var==="else"){M.push([{cat:[]}]),Q=!0;continue}if(Z.else){M.push([Z.else[1],{cat:[]}]);continue}let B=M[M.length-1];B[B.length-1].cat.push(Z)}if(!Q)M.push("");return{cat:[q.newline?"\n":"",{if:[q.args[0],...M.flat()]}]}}return{cat:[q.newline?"\n":"",{cat:{[q.name]:[...q.args,J]}}]}},Eq=function(q){return q},Fq=function(q,J){return{name:q,args:J,newline:!0}},Pq=function(q,J){return{name:q,args:J}},lq=function(q,J){if(q==="this")return{default:[{var:"this"},{var:""}]};if(q==="@key")return{default:[{var:"@key"},{var:"../index"}]};if(q==="@index")return{default:[{var:"@index"},{var:"../index"}]};if(q.startsWith("this."))return{default:[{var:q},{var:q.substring(5)}]};if(!J.length)return{var:q.replace(/\.\.\//g,"../../")};return{[q]:J}},nq=function(q){return q},uq=function(q,J){return q.join("")+J.join("")},iq=function(q){return q.join("")},oq=function(q){return q.flat().join("")},aq=function(q){return q},tq=function(q){if(q=q.join("").replace(/\.\.\//g,"../../"),q==="@key")return{default:[{var:"@key"},{var:"../index"}]};if(q==="@index")return{default:[{var:"@index"},{var:"../index"}]};if(q==="this")return{default:[{var:"this"},{var:""}]};if(q==="this.")return{default:[{var:q},{var:q.substring(5)}]};return{var:q}},cq=function(q){return q==="true"},rq=function(){return null},$q=function(){return},gq=function(q,J){return{preserve:{[q.var]:J,[Bz]:!0}}},pq=function(q){return parseInt(q.join(""),10)},sq=function(q){return q.join("")},eq=function(q){return q.join("")},qz=function(q,J){return{[q]:J}},z=H.peg$currPos|0,V=z,h=[{line:1,column:1}],S=z,u=H.peg$maxFailExpected||[],Y=H.peg$silentFails|0,O={},I;if(H.startRule){if(!(H.startRule in R))throw new Error("Can't start parsing from rule \""+H.startRule+"\".");_=R[H.startRule]}function Vz(){return W.substring(V,z)}function jz(){return V}function Rz(){return{source:j,start:V,end:z}}function Nz(){return d(V,z)}function bz(q,J){throw J=J!==void 0?J:d(V,z),Rq([Gz(q)],W.substring(V,z),J)}function _z(q,J){throw J=J!==void 0?J:d(V,z),Jz(q,J)}function N(q,J){return{type:"literal",text:q,ignoreCase:J}}function m(q,J,K){return{type:"class",parts:q,inverted:J,ignoreCase:K}}function Sz(){return{type:"any"}}function zz(){return{type:"end"}}function Gz(q){return{type:"other",description:q}}function jq(q){var J=h[q],K;if(J)return J;else{if(q>=h.length)K=h.length-1;else{K=q;while(!h[--K]);}J=h[K],J={line:J.line,column:J.column};while(K<q){if(W.charCodeAt(K)===10)J.line++,J.column=1;else J.column++;K++}return h[q]=J,J}}function d(q,J,K){var M=jq(q),Q=jq(J),Z={source:j,start:{offset:q,line:M.line,column:M.column},end:{offset:J,line:Q.line,column:Q.column}};if(K&&j&&typeof j.offset==="function")Z.start=j.offset(Z.start),Z.end=j.offset(Z.end);return Z}function w(q){if(z<S)return;if(z>S)S=z,u=[];u.push(q)}function Jz(q,J){return new f(q,null,null,J)}function Rq(q,J,K){return new f(f.buildMessage(q,J),q,J,K)}function o(){var q,J,K,M=z*17+0,Q=O[M];if(Q)return z=Q.nextPos,Q.result;if(q=z,J=[],K=Nq(),K===G)K=bq();while(K!==G)if(J.push(K),K=Nq(),K===G)K=bq();return V=q,J=Dq(J),q=J,O[M]={nextPos:z,result:q},q}function Nq(){var q,J,K,M,Q=z*17+1,Z=O[Q];if(Z)return z=Z.nextPos,Z.result;if(q=z,J=Kz(),J!==G)if(K=o(),K!==G)if(M=Qz(),M!==G)V=q,q=Lq(J,K,M);else z=q,q=G;else z=q,q=G;else z=q,q=G;if(q===G){if(q=z,J=Mz(),J!==G)V=q,J=Eq(J);q=J}return O[Q]={nextPos:z,result:q},q}function Kz(){var q,J,K,M,Q,Z,B,x,Sq=z*17+2,a=O[Sq];if(a)return z=a.nextPos,a.result;if(q=z,W.charCodeAt(z)===10)J=k,z++;else if(J=G,Y===0)w(Mq);if(J!==G){if(K=[],W.charCodeAt(z)===32)M=C,z++;else if(M=G,Y===0)w(Qq);while(M!==G)if(K.push(M),W.charCodeAt(z)===32)M=C,z++;else if(M=G,Y===0)w(Qq);if(W.substr(z,3)===v)M=v,z+=3;else if(M=G,Y===0)w(Wq);if(M!==G)if(Q=A(),Q!==G){Z=[],B=y();while(B!==G)Z.push(B),B=y();if(W.substr(z,2)===U)B=U,z+=2;else if(B=G,Y===0)w(F);if(B!==G){if(W.charCodeAt(z)===10)x=k,z++;else if(x=G,Y===0)w(Mq);if(x!==G)V=q,q=Fq(Q,Z);else z=q,q=G}else z=q,q=G}else z=q,q=G;else z=q,q=G}else z=q,q=G;if(q===G){if(q=z,W.substr(z,3)===v)J=v,z+=3;else if(J=G,Y===0)w(Wq);if(J!==G)if(K=A(),K!==G){M=[],Q=y();while(Q!==G)M.push(Q),Q=y();if(W.substr(z,2)===U)Q=U,z+=2;else if(Q=G,Y===0)w(F);if(Q!==G)V=q,q=Pq(K,M);else z=q,q=G}else z=q,q=G;else z=q,q=G}return O[Sq]={nextPos:z,result:q},q}function Mz(){var q,J,K,M,Q,Z=z*17+3,B=O[Z];if(B)return z=B.nextPos,B.result;if(q=z,W.substr(z,2)===X)J=X,z+=2;else if(J=G,Y===0)w(kq);if(J!==G)if(K=A(),K!==G){M=[],Q=y();while(Q!==G)M.push(Q),Q=y();if(W.substr(z,2)===U)Q=U,z+=2;else if(Q=G,Y===0)w(F);if(Q!==G)V=q,q=lq(K,M);else z=q,q=G}else z=q,q=G;else z=q,q=G;return O[Z]={nextPos:z,result:q},q}function Qz(){var q,J,K,M,Q,Z=z*17+4,B=O[Z];if(B)return z=B.nextPos,B.result;if(q=z,J=i(),W.substr(z,3)===b)K=b,z+=3;else if(K=G,Y===0)w(Cq);if(K!==G)if(M=A(),M!==G){if(W.substr(z,2)===U)Q=U,z+=2;else if(Q=G,Y===0)w(F);if(Q!==G)V=q,q=nq(M);else z=q,q=G}else z=q,q=G;else z=q,q=G;return O[Z]={nextPos:z,result:q},q}function A(){var q,J,K,M,Q=z*17+5,Z=O[Q];if(Z)return z=Z.nextPos,Z.result;if(q=z,J=[],W.substr(z,3)===T)K=T,z+=3;else if(K=G,Y===0)w(Yq);if(K!==G){while(K!==G)if(J.push(K),W.substr(z,3)===T)K=T,z+=3;else if(K=G,Y===0)w(Yq)}else J=G;if(J!==G){if(K=[],M=W.charAt(z),E.test(M))z++;else if(M=G,Y===0)w(P);if(M!==G){while(M!==G)if(K.push(M),M=W.charAt(z),E.test(M))z++;else if(M=G,Y===0)w(P)}else K=G;if(K!==G)V=q,q=uq(J,K);else z=q,q=G}else z=q,q=G;if(q===G){if(q=z,J=[],K=W.charAt(z),E.test(K))z++;else if(K=G,Y===0)w(P);if(K!==G){while(K!==G)if(J.push(K),K=W.charAt(z),E.test(K))z++;else if(K=G,Y===0)w(P)}else J=G;if(J!==G)V=q,J=iq(J);q=J}return O[Q]={nextPos:z,result:q},q}function bq(){var q,J,K,M,Q,Z,B=z*17+6,x=O[B];if(x)return z=x.nextPos,x.result;if(q=z,J=[],K=W.charAt(z),e.test(K))z++;else if(K=G,Y===0)w(Zq);if(K===G){if(K=z,W.charCodeAt(z)===123)M=D,z++;else if(M=G,Y===0)w(l);if(M!==G){if(Q=z,Y++,W.charCodeAt(z)===123)Z=D,z++;else if(Z=G,Y===0)w(l);if(Y--,Z===G)Q=void 0;else z=Q,Q=G;if(Q!==G)M=[M,Q],K=M;else z=K,K=G}else z=K,K=G;if(K===G){if(K=z,W.charCodeAt(z)===125)M=L,z++;else if(M=G,Y===0)w(n);if(M!==G){if(Q=z,Y++,W.charCodeAt(z)===125)Z=L,z++;else if(Z=G,Y===0)w(n);if(Y--,Z===G)Q=void 0;else z=Q,Q=G;if(Q!==G)M=[M,Q],K=M;else z=K,K=G}else z=K,K=G}}if(K!==G)while(K!==G){if(J.push(K),K=W.charAt(z),e.test(K))z++;else if(K=G,Y===0)w(Zq);if(K===G){if(K=z,W.charCodeAt(z)===123)M=D,z++;else if(M=G,Y===0)w(l);if(M!==G){if(Q=z,Y++,W.charCodeAt(z)===123)Z=D,z++;else if(Z=G,Y===0)w(l);if(Y--,Z===G)Q=void 0;else z=Q,Q=G;if(Q!==G)M=[M,Q],K=M;else z=K,K=G}else z=K,K=G;if(K===G){if(K=z,W.charCodeAt(z)===125)M=L,z++;else if(M=G,Y===0)w(n);if(M!==G){if(Q=z,Y++,W.charCodeAt(z)===125)Z=L,z++;else if(Z=G,Y===0)w(n);if(Y--,Z===G)Q=void 0;else z=Q,Q=G;if(Q!==G)M=[M,Q],K=M;else z=K,K=G}else z=K,K=G}}}else J=G;if(J!==G)V=q,J=oq(J);return q=J,O[B]={nextPos:z,result:q},q}function y(){var q,J,K,M,Q=z*17+7,Z=O[Q];if(Z)return z=Z.nextPos,Z.result;if(q=z,J=i(),K=Xz(),K===G){if(K=Wz(),K===G){if(K=Yz(),K===G){if(K=Zz(),K===G){if(K=wz(),K===G){if(K=_q(),K===G){if(K=Oz(),K===G)K=Uz()}}}}}}if(K!==G)M=i(),V=q,q=aq(K);else z=q,q=G;return O[Q]={nextPos:z,result:q},q}function _q(){var q,J,K,M=z*17+8,Q=O[M];if(Q)return z=Q.nextPos,Q.result;if(q=z,J=[],K=W.charAt(z),qq.test(K))z++;else if(K=G,Y===0)w(wq);if(K!==G){while(K!==G)if(J.push(K),K=W.charAt(z),qq.test(K))z++;else if(K=G,Y===0)w(wq)}else J=G;if(J!==G)V=q,J=tq(J);return q=J,O[M]={nextPos:z,result:q},q}function Wz(){var q,J,K=z*17+9,M=O[K];if(M)return z=M.nextPos,M.result;if(q=z,W.substr(z,4)===c)J=c,z+=4;else if(J=G,Y===0)w(mq);if(J===G){if(W.substr(z,5)===r)J=r,z+=5;else if(J=G,Y===0)w(xq)}if(J!==G)V=q,J=cq(J);return q=J,O[K]={nextPos:z,result:q},q}function Yz(){var q,J,K=z*17+10,M=O[K];if(M)return z=M.nextPos,M.result;if(q=z,W.substr(z,4)===$)J=$,z+=4;else if(J=G,Y===0)w(fq);if(J!==G)V=q,J=rq();return q=J,O[K]={nextPos:z,result:q},q}function Zz(){var q,J,K=z*17+11,M=O[K];if(M)return z=M.nextPos,M.result;if(q=z,W.substr(z,9)===g)J=g,z+=9;else if(J=G,Y===0)w(hq);if(J!==G)V=q,J=$q();return q=J,O[K]={nextPos:z,result:q},q}function wz(){var q,J,K,M,Q,Z=z*17+12,B=O[Z];if(B)return z=B.nextPos,B.result;if(q=z,J=_q(),J!==G){if(K=i(),W.charCodeAt(z)===61)M=vq,z++;else if(M=G,Y===0)w(Iq);if(M!==G)if(Q=y(),Q!==G)V=q,q=gq(J,Q);else z=q,q=G;else z=q,q=G}else z=q,q=G;return O[Z]={nextPos:z,result:q},q}function Oz(){var q,J,K,M=z*17+13,Q=O[M];if(Q)return z=Q.nextPos,Q.result;if(q=z,J=[],K=W.charAt(z),zq.test(K))z++;else if(K=G,Y===0)w(Oq);if(K!==G){while(K!==G)if(J.push(K),K=W.charAt(z),zq.test(K))z++;else if(K=G,Y===0)w(Oq)}else J=G;if(J!==G)V=q,J=pq(J);return q=J,O[M]={nextPos:z,result:q},q}function Uz(){var q,J,K,M,Q=z*17+14,Z=O[Q];if(Z)return z=Z.nextPos,Z.result;if(q=z,W.charCodeAt(z)===34)J=p,z++;else if(J=G,Y===0)w(Uq);if(J!==G){if(K=[],M=W.charAt(z),Gq.test(M))z++;else if(M=G,Y===0)w(Xq);while(M!==G)if(K.push(M),M=W.charAt(z),Gq.test(M))z++;else if(M=G,Y===0)w(Xq);if(W.charCodeAt(z)===34)M=p,z++;else if(M=G,Y===0)w(Uq);if(M!==G)V=q,q=sq(K);else z=q,q=G}else z=q,q=G;if(q===G){if(q=z,W.charCodeAt(z)===39)J=s,z++;else if(J=G,Y===0)w(Bq);if(J!==G){if(K=[],M=W.charAt(z),Jq.test(M))z++;else if(M=G,Y===0)w(Hq);while(M!==G)if(K.push(M),M=W.charAt(z),Jq.test(M))z++;else if(M=G,Y===0)w(Hq);if(W.charCodeAt(z)===39)M=s,z++;else if(M=G,Y===0)w(Bq);if(M!==G)V=q,q=eq(K);else z=q,q=G}else z=q,q=G}return O[Q]={nextPos:z,result:q},q}function Xz(){var q,J,K,M,Q,Z=z*17+15,B=O[Z];if(B)return z=B.nextPos,B.result;if(q=z,W.charCodeAt(z)===40)J=Tq,z++;else if(J=G,Y===0)w(dq);if(J!==G)if(K=A(),K!==G){M=[],Q=y();while(Q!==G)M.push(Q),Q=y();if(W.charCodeAt(z)===41)Q=yq,z++;else if(Q=G,Y===0)w(Aq);if(Q!==G)V=q,q=qz(K,M);else z=q,q=G}else z=q,q=G;else z=q,q=G;return O[Z]={nextPos:z,result:q},q}function i(){var q,J,K=z*17+16,M=O[K];if(M)return z=M.nextPos,M.result;if(q=[],J=W.charAt(z),Kq.test(J))z++;else if(J=G,Y===0)w(Vq);while(J!==G)if(q.push(J),J=W.charAt(z),Kq.test(J))z++;else if(J=G,Y===0)w(Vq);return O[K]={nextPos:z,result:q},q}let Bz=Symbol.for("HashArg");if(I=_(),H.peg$library)return{peg$result:I,peg$currPos:z,peg$FAILED:G,peg$maxFailExpected:u,peg$maxFailPos:S};if(I!==G&&z===W.length)return I;else{if(I!==G&&z<W.length)w(zz());throw Rq(u,S<W.length?W.charAt(S):null,S<W.length?d(S,S+1):d(S,S))}}var Tz=["Content"];export{vz as parse,f as SyntaxError,Tz as StartRules};
